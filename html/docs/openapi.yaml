openapi: 3.1.0
info:
  title: API Médicaments FR
  description: |
    API haute performance pour accéder aux données des médicaments français issus de la BDPM.

    ## Caractéristiques
    - Mises à jour automatiques 2x/jour (6h/18h)
    - Rate limiting : 1000 tokens initiaux, 3 tokens/sec recharge
    - Totalement gratuite avec système de rate limiting pour éviter le spam
    - Intégrité : Aucune altération des données originales
    - Source : Base de Données Publique des Médicaments (BDPM)

    ## Coûts par endpoint (v1)
    - `/health` : 5 tokens
    - `/v1/medicaments?export=all` : 200 tokens
    - `/v1/medicaments?page={n}` : 20 tokens
    - `/v1/medicaments?search={query}` : 50 tokens
    - `/v1/medicaments?cis={code}` : 10 tokens
    - `/v1/medicaments?cip={code}` : 10 tokens
    - `/v1/generiques?libelle={nom}` : 30 tokens
    - `/v1/generiques?group={id}` : 5 tokens
    - `/v1/presentations?cip={code}` : 5 tokens

    ## Endpoints legacy (dépréciés)
    Les endpoints ci-dessous sont dépréciés et seront supprimés le **31 juillet 2026**.
    Veuillez migrer vers les endpoints v1. Consultez la section "Migration" pour plus d'informations.

    Coûts des endpoints legacy :
    - `/database` : 200 tokens
    - `/database/{page}` : 20 tokens
    - `/medicament/{nom}` : 80 tokens
    - `/medicament/id/{cis}` : 10 tokens
    - `/generiques/{libelle}` : 20 tokens
    - `/generiques/group/{id}` : 20 tokens

    ## Rate Limiting
    Les informations relatives au rate limiting se trouvent dans les headers des réponses :
    - X-RateLimit-Limit : Capacité maximale de tokens
    - X-RateLimit-Remaining : Tokens restants pour cette IP
    - X-RateLimit-Rate : Taux de recharge (tokens/sec)

    ## Migration vers v1
    Les endpoints v1 utilisent des paramètres de requête au lieu de paramètres de chemin :
    - `/medicament/paracetamol` → `/v1/medicaments?search=paracetamol`
    - `/medicament/id/61504672` → `/v1/medicaments?cis=61504672`
    - `/generiques/paracetamol` → `/v1/generiques?libelle=paracetamol`
    - `/generiques/group/1234` → `/v1/generiques?group=1234`
    - `/database/1` → `/v1/medicaments?page=1`
    - `/database` → `/v1/medicaments?export=all`

    Les endpoints legacy renvoient les headers de dépréciation suivants :
    - Deprecation: true
    - Sunset: 2026-07-31T23:59:59Z
    - Link: URL de l'endpoint de remplacement
    - X-Deprecated: Message de dépréciation
    - Warning: Avertissement HTTP standard
  version: 1.1.0
  contact:
    name: GitHub Repository
    url: https://github.com/giygas/medicaments-api
  license:
    name: AGPL-3.0
    url: https://www.gnu.org/licenses/agpl-3.0.html
  externalDocs:
    description: Base de données publique des médicaments
    url: https://base-donnees-publique.medicaments.gouv.fr

paths:
  /v1/medicaments:
    get:
      summary: Obtenir des médicaments (v1)
      description: |
        Recherche et récupération de médicaments avec différents paramètres de requête.
        Seul un paramètre est autorisé à la fois.

        **Paramètres disponibles :**
        - `export=all` : Exporter toute la base de données (200 tokens)
        - `page={n}` : Pagination, 10 médicaments par page (20 tokens)
        - `search={query}` : Recherche par nom (50 tokens)
        - `cis={code}` : Recherche par code CIS (10 tokens)
        - `cip={code}` : Recherche par code CIP (10 tokens)

        **Exemple :**
        ```
        /v1/medicaments?search=paracetamol
        /v1/medicaments?cis=61504672
        /v1/medicaments?page=1
        /v1/medicaments?export=all
        ```
      tags:
        - Médicaments (v1)
      parameters:
        - name: export
          in: query
          required: false
          description: Exporter toute la base de données (doit être égal à "all")
          schema:
            type: string
            enum: ["all"]
        - name: page
          in: query
          required: false
          description: Numéro de page (pagination à 10 éléments par page)
          schema:
            type: integer
            minimum: 1
        - name: search
          in: query
          required: false
          description: Terme de recherche (3-50 caractères, alphanumérique avec espaces)
          schema:
            type: string
            minLength: 3
            maxLength: 50
            pattern: "^[a-zA-Z0-9 ]+$"
        - name: cis
          in: query
          required: false
          description: Code CIS (entier positif)
          schema:
            type: integer
            minimum: 1
            maximum: 999999999
        - name: cip
          in: query
          required: false
          description: Code CIP (CIP7 ou CIP13, entier positif)
          schema:
            type: integer
            minimum: 1
      responses:
        "200":
          description: Réponse réussie
          content:
            application/json:
              examples:
                export:
                  summary: Export complet
                  value:
                    - cis: 61504672
                      elementPharmaceutique: "PARACETAMOL MYLAN 1 g, comprimé"
                      formePharmaceutique: "comprimé"
                      voiesAdministration: ["orale"]
                      statusAutorisation: "Autorisation active"
                      typeProcedure: "Procédure nationale"
                      etatComercialisation: "Commercialisée"
                      dateAMM: "2000-01-01"
                      titulaire: "MYLAN SAS"
                      surveillanceRenforce: "Non"
                      composition: []
                      generiques: []
                      presentation: []
                      conditions: []
                paginated:
                  summary: Pagination
                  value:
                    data:
                      - cis: 61504672
                        elementPharmaceutique: "PARACETAMOL MYLAN 1 g, comprimé"
                        formePharmaceutique: "comprimé"
                        voiesAdministration: ["orale"]
                        statusAutorisation: "Autorisation active"
                        typeProcedure: "Procédure nationale"
                        etatComercialisation: "Commercialisée"
                        dateAMM: "2000-01-01"
                        titulaire: "MYLAN SAS"
                        surveillanceRenforce: "Non"
                        composition: []
                        generiques: []
                        presentation: []
                        conditions: []
                    page: 1
                    pageSize: 10
                    totalItems: 15803
                    maxPage: 1581
                search:
                  summary: Recherche par nom
                  value:
                    - cis: 61504672
                      elementPharmaceutique: "PARACETAMOL MYLAN 1 g, comprimé"
                      formePharmaceutique: "comprimé"
                      voiesAdministration: ["orale"]
                      statusAutorisation: "Autorisation active"
                      typeProcedure: "Procédure nationale"
                      etatComercialisation: "Commercialisée"
                      dateAMM: "2000-01-01"
                      titulaire: "MYLAN SAS"
                      surveillanceRenforce: "Non"
                      composition: []
                      generiques: []
                      presentation: []
                      conditions: []
                    - cis: 60001234
                      elementPharmaceutique: "DOLIPRANE 1000 mg, comprimé"
                      formePharmaceutique: "comprimé"
                      voiesAdministration: ["orale"]
                      statusAutorisation: "Autorisation active"
                      typeProcedure: "Procédure nationale"
                      etatComercialisation: "Commercialisée"
                      dateAMM: "1998-05-15"
                      titulaire: "SANOFI AVENTIS FRANCE"
                      surveillanceRenforce: "Non"
                      composition: []
                      generiques: []
                      presentation: []
                      conditions: []
        "400":
          description: Paramètres invalides
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Bad Request"
                message: "Only one parameter allowed at a time"
                code: 400
        "404":
          description: Aucun résultat
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Not Found"
                message: "No medicaments found"
                code: 404
        "500":
          description: Erreur interne du serveur
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Internal Server Error"
                message: "Internal server error"
                code: 500

  /v1/generiques:
    get:
      summary: Rechercher des groupes génériques (v1)
      description: |
        Recherche et récupération de groupes génériques avec différents paramètres de requête.
        Seul un paramètre est autorisé à la fois.

        **Paramètres disponibles :**
        - `libelle={nom}` : Recherche par libellé (30 tokens)
        - `group={id}` : Recherche par ID de groupe (5 tokens)

        **Exemple :**
        ```
        /v1/generiques?libelle=paracetamol
        /v1/generiques?group=1234
        ```
      tags:
        - Génériques (v1)
      parameters:
        - name: libelle
          in: query
          required: false
          description: Terme de recherche (3-50 caractères, alphanumérique avec espaces)
          schema:
            type: string
            minLength: 3
            maxLength: 50
            pattern: "^[a-zA-Z0-9 ]+$"
        - name: group
          in: query
          required: false
          description: ID de groupe (entier positif)
          schema:
            type: integer
            minimum: 1
            maximum: 99999
      responses:
        "200":
          description: Réponse réussie
          content:
            application/json:
              examples:
                search:
                  summary: Recherche par libellé
                  value:
                    - groupID: 1643
                      libelle: "PARACETAMOL 500 mg + CODEINE (PHOSPHATE DE) HEMIHYDRATE 30 mg - DAFALGAN CODEINE, comprimé pelliculé"
                      medicaments:
                        - cis: 66003374
                          elementPharmaceutique: "DAFALGAN CODEINE, comprimé pelliculé"
                          formePharmaceutique: "comprimé pelliculé"
                          type: "Princeps"
                          composition:
                            - elementPharmaceutique: "comprimé pelliculé"
                              substance: "PARACETAMOL"
                              dosage: "500 mg"
                            - elementPharmaceutique: "comprimé pelliculé"
                              substance: "CODÉINE (PHOSPHATE DE) HÉMIHYDRATÉ"
                              dosage: "30 mg"
                        - cis: 69458587
                          elementPharmaceutique: "PARACETAMOL/CODEINE BIOGARAN 500 mg/30 mg, comprimé"
                          formePharmaceutique: "comprimé"
                          type: "Générique"
                          composition:
                            - elementPharmaceutique: "comprimé"
                              substance: "PARACETAMOL"
                              dosage: "500 mg"
                            - elementPharmaceutique: "comprimé"
                              substance: "CODÉINE (PHOSPHATE DE) HÉMIHYDRATÉ"
                              dosage: "30 mg"
                group:
                  summary: Recherche par ID de groupe
                  value:
                    groupID: 1643
                    libelle: "PARACETAMOL 500 mg + CODEINE (PHOSPHATE DE) HEMIHYDRATE 30 mg - DAFALGAN CODEINE, comprimé pelliculé"
                    medicaments:
                      - cis: 66003374
                        elementPharmaceutique: "DAFALGAN CODEINE, comprimé pelliculé"
                        formePharmaceutique: "comprimé pelliculé"
                        type: "Princeps"
                        composition:
                          - elementPharmaceutique: "comprimé pelliculé"
                            substance: "PARACETAMOL"
                            dosage: "500 mg"
                          - elementPharmaceutique: "comprimé pelliculé"
                            substance: "CODÉINE (PHOSPHATE DE) HÉMIHYDRATÉ"
                            dosage: "30 mg"
                      - cis: 69458587
                        elementPharmaceutique: "PARACETAMOL/CODEINE BIOGARAN 500 mg/30 mg, comprimé"
                        formePharmaceutique: "comprimé"
                        type: "Générique"
                        composition:
                          - elementPharmaceutique: "comprimé"
                            substance: "PARACETAMOL"
                            dosage: "500 mg"
                          - elementPharmaceutique: "comprimé"
                            substance: "CODÉINE (PHOSPHATE DE) HÉMIHYDRATÉ"
                            dosage: "30 mg"
        "400":
          description: Paramètres invalides
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Bad Request"
                message: "Needs libelle or group param"
                code: 400
        "404":
          description: Aucun générique trouvé
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Not Found"
                message: "No generiques found"
                code: 404
        "500":
          description: Erreur interne du serveur
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Internal Server Error"
                message: "Internal server error"
                code: 500

  /v1/presentations:
    get:
      summary: Obtenir des présentations (v1)
      description: |
        Recherche de présentations par code CIP (CIP7 ou CIP13).

        **Paramètre disponible :**
        - `cip={code}` : Recherche par code CIP (5 tokens)

        **Exemple :**
        ```
        /v1/presentations?cip=3400936403114
        ```
      tags:
        - Présentations (v1)
      parameters:
        - name: cip
          in: query
          required: true
          description: Code CIP (CIP7 ou CIP13, entier positif)
          schema:
            type: integer
            minimum: 1
      responses:
        "200":
          description: Réponse réussie
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PresentationResponse"
              example:
                cis: 60904643
                cip7: 3400936403114
                libelle: "CODOLIPRANE 500 mg/30 mg, comprimé (16)"
                statusAdministratif: "Présentation active"
                etatComercialisation: "Commercialisée"
                dateDeclaration: "19/01/1965"
                cip13: 3400936403114
                agreement: "non"
                tauxRemboursement: "65%"
                prix: 3.85
        "400":
          description: Code CIP invalide
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Bad Request"
                message: "Invalid CIP"
                code: 400
        "404":
          description: Présentation non trouvée
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Not Found"
                message: "Presentation not found"
                code: 404
        "500":
          description: Erreur interne du serveur
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Internal Server Error"
                message: "Internal server error"
                code: 500

  /database:
    get:
      deprecated: true
      summary: "[LEGACY] Obtenir tous les médicaments"
      description: |
        **DEPRÉCIÉ - Ce endpoint sera supprimé le 31 juillet 2026**

        Récupérer la liste complète de tous les médicaments dans la base de données.

        **Migration :** Utilisez `/v1/medicaments?export=all` à la place.
      tags:
        - Médicaments (Legacy)
      responses:
        "200":
          description: Réponse réussie
          headers:
            Deprecation:
              schema:
                type: string
                example: "true"
            Sunset:
              schema:
                type: string
                format: date-time
                example: "2026-07-31T23:59:59Z"
            Link:
              schema:
                type: string
                example: '<https://medicaments-api.giygas.dev/v1/medicaments?export=all>; rel="successor-version"'
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/MedicamentResponse"
        "500":
          description: Erreur interne du serveur
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /database/{pageNumber}:
    get:
      deprecated: true
      summary: "[LEGACY] Obtenir des médicaments par page"
      description: |
        **DEPRÉCIÉ - Ce endpoint sera supprimé le 31 juillet 2026**

        Pagination de la base de données (10 éléments/page).

        **Migration :** Utilisez `/v1/medicaments?page={n}` à la place.
      tags:
        - Médicaments (Legacy)
      parameters:
        - name: pageNumber
          in: path
          required: true
          description: Numéro de page
          schema:
            type: integer
            minimum: 1
      responses:
        "200":
          description: Réponse réussie
          headers:
            Deprecation:
              schema:
                type: string
                example: "true"
            Sunset:
              schema:
                type: string
                format: date-time
                example: "2026-07-31T23:59:59Z"
            Link:
              schema:
                type: string
                example: '<https://medicaments-api.giygas.dev/v1/medicaments?page=1>; rel="successor-version"'
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/MedicamentResponse"
                  page:
                    type: integer
                  pageSize:
                    type: integer
                  totalItems:
                    type: integer
                  maxPage:
                    type: integer
        "400":
          description: Numéro de page invalide
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Bad Request"
                message: "Invalid page number"
                code: 400
        "404":
          description: Page non trouvée
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Not Found"
                message: "Page not found"
                code: 404
        "500":
          description: Erreur interne du serveur
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /medicament/{element}:
    get:
      deprecated: true
      summary: "[LEGACY] Rechercher des médicaments par nom"
      description: |
        **DEPRÉCIÉ - Ce endpoint sera supprimé le 31 juillet 2026**

        Rechercher des médicaments par dénomination (insensible à la casse).

        **Migration :** Utilisez `/v1/medicaments?search={query}` à la place.
      tags:
        - Médicaments (Legacy)
      parameters:
        - name: element
          in: path
          required: true
          description: Terme de recherche (3-50 caractères, alphanumérique avec espaces)
          schema:
            type: string
            minLength: 3
            maxLength: 50
            pattern: "^[a-zA-Z0-9 ]+$"
      responses:
        "200":
          description: Réponse réussie
          headers:
            Deprecation:
              schema:
                type: string
                example: "true"
            Sunset:
              schema:
                type: string
                format: date-time
                example: "2026-07-31T23:59:59Z"
            Link:
              schema:
                type: string
                example: '<https://medicaments-api.giygas.dev/v1/medicaments?search=paracetamol>; rel="successor-version"'
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/MedicamentResponse"
        "400":
          description: Terme de recherche invalide
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Bad Request"
                message: "Invalid search term: must be alphanumeric with spaces, max 50 characters"
                code: 400
        "404":
          description: Aucun médicament trouvé
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Not Found"
                message: "No medicaments found"
                code: 404
        "500":
          description: Erreur interne du serveur
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /medicament/id/{cis}:
    get:
      deprecated: true
      summary: "[LEGACY] Obtenir un médicament par code CIS"
      description: |
        **DEPRÉCIÉ - Ce endpoint sera supprimé le 31 juillet 2026**

        Récupérer un médicament spécifique par son CIS (Code Identifiant de Spécialité).

        **Migration :** Utilisez `/v1/medicaments?cis={code}` à la place.
      tags:
        - Médicaments (Legacy)
      parameters:
        - name: cis
          in: path
          required: true
          description: Code CIS (entier positif inférieur à 1 000 000 000)
          schema:
            type: integer
            minimum: 1
            maximum: 999999999
      responses:
        "200":
          description: Réponse réussie
          headers:
            Deprecation:
              schema:
                type: string
                example: "true"
            Sunset:
              schema:
                type: string
                format: date-time
                example: "2026-07-31T23:59:59Z"
            Link:
              schema:
                type: string
                example: '<https://medicaments-api.giygas.dev/v1/medicaments?cis=61504672>; rel="successor-version"'
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MedicamentResponse"
        "400":
          description: Code CIS invalide
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Bad Request"
                message: "Invalid CIS"
                code: 400
        "404":
          description: Médicament non trouvé
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Not Found"
                message: "Medicament not found"
                code: 404
        "500":
          description: Erreur interne du serveur
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /generiques/{libelle}:
    get:
      deprecated: true
      summary: "[LEGACY] Rechercher des groupes génériques par nom"
      description: |
        **DEPRÉCIÉ - Ce endpoint sera supprimé le 31 juillet 2026**

        Rechercher des groupes génériques par libellé (insensible à la casse).

        **Migration :** Utilisez `/v1/generiques?libelle={nom}` à la place.
      tags:
        - Génériques (Legacy)
      parameters:
        - name: libelle
          in: path
          required: true
          description: Terme de recherche (3-50 caractères, alphanumérique avec espaces)
          schema:
            type: string
            minLength: 3
            maxLength: 50
            pattern: "^[a-zA-Z0-9 ]+$"
      responses:
        "200":
          description: Réponse réussie
          headers:
            Deprecation:
              schema:
                type: string
                example: "true"
            Sunset:
              schema:
                type: string
                format: date-time
                example: "2026-07-31T23:59:59Z"
            Link:
              schema:
                type: string
                example: '<https://medicaments-api.giygas.dev/v1/generiques?libelle=paracetamol>; rel="successor-version"'
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/GeneriqueListResponse"
        "400":
          description: Terme de recherche invalide
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Bad Request"
                message: "Invalid search term: must be alphanumeric with spaces, max 50 characters"
                code: 400
        "404":
          description: Aucun générique trouvé
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Not Found"
                message: "No generiques found"
                code: 404
        "500":
          description: Erreur interne du serveur
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /generiques/group/{groupId}:
    get:
      deprecated: true
      summary: "[LEGACY] Obtenir un groupe générique par ID"
      description: |
        **DEPRÉCIÉ - Ce endpoint sera supprimé le 31 juillet 2026**

        Récupérer un groupe générique spécifique par son ID de groupe.

        **Migration :** Utilisez `/v1/generiques?group={id}` à la place.
      tags:
        - Génériques (Legacy)
      parameters:
        - name: groupId
          in: path
          required: true
          description: ID de groupe (entier positif inférieur à 100 000)
          schema:
            type: integer
            minimum: 1
            maximum: 99999
      responses:
        "200":
          description: Réponse réussie
          headers:
            Deprecation:
              schema:
                type: string
                example: "true"
            Sunset:
              schema:
                type: string
                format: date-time
                example: "2026-07-31T23:59:59Z"
            Link:
              schema:
                type: string
                example: '<https://medicaments-api.giygas.dev/v1/generiques?group=1234>; rel="successor-version"'
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GeneriqueResponse"
        "400":
          description: ID de groupe invalide
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Bad Request"
                message: "Invalid group ID"
                code: 400
        "404":
          description: Groupe générique non trouvé
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Not Found"
                message: "Generique group not found"
                code: 404
        "500":
          description: Erreur interne du serveur
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /health:
    get:
      summary: Point de terminaison de vérification de santé
      description: Vérifier l'état de santé de l'API et de la base de données
      tags:
        - Système
      responses:
        "200":
          description: État du système
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    enum: ["healthy", "degraded", "unhealthy"]
                    example: "healthy"
                    description: État de santé global de l'API
                  uptime_seconds:
                    type: integer
                    example: 86400
                    description: Temps de fonctionnement en secondes
                  uptime_human:
                    type: string
                    example: "1d 2h 30m 45s"
                    description: Temps de fonctionnement au format lisible
                  last_updated:
                    type: string
                    format: date-time
                    example: "2026-01-15T06:00:00Z"
                    description: Date et heure de la dernière mise à jour réussie
                  data:
                    type: object
                    properties:
                      medicament_count:
                        type: integer
                        example: 15420
                        description: Nombre total de médicaments dans la base
                      generique_count:
                        type: integer
                        example: 5200
                        description: Nombre total de groupes génériques
                      data_age_hours:
                        type: number
                        format: float
                        example: 2.5
                        description: Âge des données en heures depuis la dernière mise à jour
                      next_update:
                        type: string
                        format: date-time
                        example: "2026-01-15T18:00:00Z"
                        description: Prochaine mise à jour planifiée
                    description: Informations sur les données de l'API
                  system:
                    type: object
                    properties:
                      updating:
                        type: boolean
                        example: false
                        description: Indique si une mise à jour est en cours
                      memory_usage_mb:
                        type: integer
                        example: 130
                        description: Utilisation mémoire en MB
                      goroutines:
                        type: integer
                        example: 45
                        description: Nombre de goroutines actives
                    description: Informations système et performance
                example:
                  status: "healthy"
                  uptime_seconds: 86400
                  uptime_human: "1d 0h 0m 0s"
                  last_updated: "2026-01-15T06:00:00Z"
                  data:
                    medicament_count: 15420
                    generique_count: 5200
                    data_age_hours: 2.5
                    next_update: "2026-01-15T18:00:00Z"
                  system:
                    updating: false
                    memory_usage_mb: 130
                    goroutines: 45
        "500":
          description: Erreur interne du serveur
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Internal Server Error"
                message: "Internal server error"
                code: 500

tags:
  - name: Médicaments (v1)
    description: Points de terminaison v1 liés aux médicaments
  - name: Génériques (v1)
    description: Points de terminaison v1 des groupes de médicaments génériques
  - name: Présentations (v1)
    description: Points de terminaison v1 des présentations de médicaments
  - name: Médicaments (Legacy)
    description: Points de terminaison legacy liés aux médicaments (dépréciés)
  - name: Génériques (Legacy)
    description: Points de terminaison legacy des groupes de médicaments génériques (dépréciés)
  - name: Système
    description: Points de terminaison de santé et d'état du système

components:
  schemas:
    MedicamentResponse:
      type: object
      title: MedicamentResponse
      properties:
        cis:
          type: integer
          title: Code CIS
        elementPharmaceutique:
          type: string
          title: Nom pharmaceutique
        formePharmaceutique:
          type: string
          title: Forme pharmaceutique
        voiesAdministration:
          type: array
          items:
            type: string
          title: Voies d'administration
        statusAutorisation:
          type: string
          title: Statut d'autorisation
        typeProcedure:
          type: string
          title: Type de procédure
        etatComercialisation:
          type: string
          title: Statut de commercialisation
        dateAMM:
          type: string
          title: Date AMM
        titulaire:
          type: string
          title: Titulaire de l'autorisation
        surveillanceRenforce:
          type: string
          title: Surveillance renforcée
        composition:
          type: array
          items:
            $ref: "#/components/schemas/CompositionResponse"
          title: Composition
        generiques:
          type: array
          items:
            $ref: "#/components/schemas/GeneriqueResponse"
          title: Génériques associés
        presentation:
          type: array
          items:
            $ref: "#/components/schemas/PresentationResponse"
          title: Présentations disponibles
        conditions:
          type: array
          items:
            type: string
          title: Conditions de prescription

    CompositionResponse:
      type: object
      title: CompositionResponse
      properties:
        cis:
          type: integer
          title: Code CIS
        elementPharmaceutique:
          type: string
          title: Élément pharmaceutique
        codeSubstance:
          type: integer
          title: Code de substance
        denominationSubstance:
          type: string
          title: Dénomination de substance
        dosage:
          type: string
          title: Dosage
        referenceDosage:
          type: string
          title: Dosage de référence
        natureComposant:
          type: string
          title: Nature du composant

    GeneriqueResponse:
      type: object
      title: GeneriqueResponse
      properties:
        cis:
          type: integer
          title: Code CIS
        group:
          type: integer
          title: ID de groupe générique
        libelle:
          type: string
          title: Libellé de groupe générique
        type:
          type: string
          title: Type de générique

    PresentationResponse:
      type: object
      title: PresentationResponse
      properties:
        cis:
          type: integer
          title: Code CIS
        cip7:
          type: integer
          title: Code CIP-7
        libelle:
          type: string
          title: Libellé de présentation
        statusAdministratif:
          type: string
          title: Statut administratif
        etatComercialisation:
          type: string
          title: Statut de commercialisation
        dateDeclaration:
          type: string
          title: Date de déclaration
        cip13:
          type: integer
          title: Code CIP-13
        agreement:
          type: string
          title: Statut d'agrément
        tauxRemboursement:
          type: string
          title: Taux de remboursement
        prix:
          type: number
          format: float
          title: Prix

    GeneriqueListResponse:
      type: object
      title: GeneriqueListResponse
      properties:
        groupID:
          type: integer
          title: ID de groupe générique
        libelle:
          type: string
          title: Libellé de groupe générique
        medicaments:
          type: array
          items:
            $ref: "#/components/schemas/GeneriqueMedicamentResponse"
          title: Médicaments du groupe

    GeneriqueMedicamentResponse:
      type: object
      title: GeneriqueMedicamentResponse
      properties:
        cis:
          type: integer
          title: Code CIS
        elementPharmaceutique:
          type: string
          title: Nom pharmaceutique
        formePharmaceutique:
          type: string
          title: Forme pharmaceutique
        type:
          type: string
          title: Type de générique
        composition:
          type: array
          items:
            $ref: "#/components/schemas/GeneriqueCompositionResponse"
          title: Composition pour groupement générique

    GeneriqueCompositionResponse:
      type: object
      title: GeneriqueCompositionResponse
      properties:
        elementPharmaceutique:
          type: string
          title: Élément pharmaceutique
        substance:
          type: string
          title: Nom de substance
        dosage:
          type: string
          title: Dosage

    ErrorResponse:
      type: object
      title: ErrorResponse
      properties:
        error:
          type: string
          title: Statut d'erreur
        message:
          type: string
          title: Message d'erreur
        code:
          type: integer
          title: Code de statut HTTP
